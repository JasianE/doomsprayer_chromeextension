{"version":3,"file":"background.js","mappings":";;;;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sources":["webpack://doomspray_front_end/./src/background.js"],"sourcesContent":["chrome.runtime.onInstalled.addListener(() => {\n  chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n    let the_url = tabs[0].url;\n    \n    fetch('http://localhost:8002/blocked-sites')\n    .then((response) => {\n      console.log(response)\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n    fetch(\"http://localhost:5000/scrape\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ \n        extra_urls,\n        the_url\n       })\n    })\n  })\n}) //local storage\n\n\nchrome.tabs.onActivated.addListener((activeInfo) => {\n  chrome.tabs.get(activeInfo.tabId, (tab) => {\n    console.log(tab)\n    if (tab && tab.url) {\n      console.log('im here rn')\n      handleUrl(tab.url);\n    }\n  });\n});\n\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n  if (changeInfo.status === 'complete' && tab.active && tab.url) {\n    handleUrl(tab.url);\n  }\n});\n\nasync function handleUrl(the_url){\n    fetch(\"http://localhost:8002/blocked-sites\")\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      return response\n    })\n    .then((response) => {\n      const data = {\n        extra_urls: response,\n        the_url\n      }\n      fetch(\"http://localhost:5000/scrape\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n  \n    }).catch((error) => {\n      console.log(error)\n    })\n  })\n    /*await fetch(\"http://localhost:5000/scrape\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ \n        extra_urls,\n        the_url\n       })\n    })*/\n    \n}"],"names":[],"sourceRoot":""}